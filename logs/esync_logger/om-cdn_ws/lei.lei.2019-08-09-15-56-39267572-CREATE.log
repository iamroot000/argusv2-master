--- /ansible/nginx/hostgroups/om-cdn_ws/nginx/conf.d/global/geoip.conf	2019-08-09 15:51:07.741697405 +0800
+++ /tmp/geoip.conf	2019-08-09 15:56:39.159293457 +0800
@@ -1,3 +1,66 @@
+### SET the path to the .dat file used for determining the visitor's country from the IP-address ###
+#geoip_country /usr/local/share/GeoIP/GeoIP.dat;
+#geoip_country /usr/local/nginx/html/GeoIP-106_20160719.dat;
+geoip_country /usr/local/nginx/data/GeoIP-106_20171017.dat;
+map $geoip_country_code $allowed_country { #refer to bisystem per project
+   default yes;
+#incapsula ip
+   199.83.128.0/21 yes;
+   198.143.32.0/19 yes;
+   149.126.72.0/21 yes;
+   103.28.248.0/22 yes;
+   45.64.64.0/22 yes;
+   185.11.124.0/22 yes;
+   192.230.64.0/18 yes;
+   107.154.247.0/18 yes;
+#cloud flare ip 
+ 103.21.244.0/22 yes;
+ 103.22.200.0/22 yes;
+ 103.31.4.0/22 yes;
+ 104.16.0.0/12 yes;
+ 108.162.192.0/18 yes;
+ 131.0.72.0/22 yes;
+ 141.101.64.0/18 yes;
+ 162.158.0.0/15 yes;
+ 172.64.0.0/13 yes;
+ 173.245.48.0/20 yes;
+ 188.114.96.0/20 yes;
+ 190.93.240.0/20 yes;
+ 197.234.240.0/22 yes;
+ 198.41.128.0/17 yes;
+ 199.27.128.0/21 yes;
+ 175.100.205.50 yes;
+ 112.198.18.198 yes;
+ 43.231.229.123 yes;
+ 175.45.41.122 yes;
+   CN yes;
+   US no;
+   MO no;
+   SG no;
+   HK no;
+   PH no; #Philippines, all proj
+   TW no; #Taiwan #all proj
+   AU no;
+   AUS no;
+   }
+
+### SET FASTCGI Variables ###
+#
+fastcgi_param GEOIP_COUNTRY_CODE $geoip_country_code;
+fastcgi_param GEOIP_COUNTRY_CODE3 $geoip_country_code3;
+fastcgi_param GEOIP_COUNTRY_NAME $geoip_country_name;
+
+### SET FASTCGI Variables ###
+fastcgi_param GEOIP_CITY_COUNTRY_CODE $geoip_city_country_code;
+fastcgi_param GEOIP_CITY_COUNTRY_CODE3 $geoip_city_country_code3;
+fastcgi_param GEOIP_CITY_COUNTRY_NAME $geoip_city_country_name;
+fastcgi_param GEOIP_REGION $geoip_region;
+fastcgi_param GEOIP_CITY $geoip_city;
+fastcgi_param GEOIP_POSTAL_CODE $geoip_postal_code;
+fastcgi_param GEOIP_CITY_CONTINENT_CODE $geoip_city_continent_code;
+fastcgi_param GEOIP_LATITUDE $geoip_latitude;
+fastcgi_param GEOIP_LONGITUDE $geoip_longitude;
+
 
 
 

