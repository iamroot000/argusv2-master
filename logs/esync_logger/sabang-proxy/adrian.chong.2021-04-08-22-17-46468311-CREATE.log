
server {
        listen      80;
        server_name www.lazabong.com;
  		rewrite ^(.*)$ https://www.lazabong.com$1 permanent;
}


server {
        listen      443 ssl;
        server_name www.lazabong.com;
        index   index.jsp index.html index.htm;
        charset utf-8;
  
  		ssl on;
    	ssl_certificate /usr/local/nginx/conf.d/ssl/lazabong.com/fullchain.pem;
    	ssl_certificate_key /usr/local/nginx/conf.d/ssl/lazabong.com/privkey.pem;
  
        access_log  logs/pmsdj-80.access.log main;
        access_log  logs/pmsdj-80.logstash.access.log logstash;
  		error_log   logs/pmsdj-80.error.log;
  
        location / {
#	   		include /usr/local/nginx/conf.d/global/whitelist_map3.conf;
           		proxy_redirect          off; 
				proxy_set_header        Host            $host; 
				proxy_set_header        X-Real-IP       $remote_addr;
				proxy_set_header        referer         "";
				proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for; 
#    			proxy_cache cache_after;
#        		proxy_cache_key    $uri$is_args$args;
#        		add_header X-Cache $upstream_cache_status;
#        		proxy_cache_valid 200 3d;
#        		proxy_cache_valid 301 302 1d;
#        		proxy_cache_valid any 3d;
#        		proxy_cache_use_stale error http_500 http_502 http_503 http_504;
				proxy_connect_timeout   80; 
				proxy_send_timeout      80; 
				proxy_read_timeout      80; 
				client_max_body_size    35m;
				client_body_buffer_size 256k;
				proxy_buffer_size       256k;
				proxy_buffers           4 256k;
				proxy_busy_buffers_size 256k;
				proxy_temp_file_write_size      256k;
            	proxy_pass http://pmsdj_web;
        }
}



server {
        listen      443 ssl;
        server_name agent.lazabong.com;
        index   index.jsp index.html index.htm;
        charset utf-8;
  
  		ssl on;
    	ssl_certificate /usr/local/nginx/conf.d/ssl/lazabong.com/fullchain.pem;
    	ssl_certificate_key /usr/local/nginx/conf.d/ssl/lazabong.com/privkey.pem;
  
        access_log  logs/pmsdj-agent.access.log main;
        access_log  logs/pmsdj-agent.logstash.access.log logstash;
        error_log   logs/pmsdj-agent.error.log;
  
        location / {
#		   		include /usr/local/nginx/conf.d/global/whitelist_map2.conf;
           		proxy_redirect          off; 
				proxy_set_header        Host            $host; 
				proxy_set_header        X-Real-IP       $remote_addr;
				proxy_set_header        referer         "";
				proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for; 
    			proxy_cache cache_after;
        		proxy_cache_key    $uri$is_args$args;
        		add_header X-Cache $upstream_cache_status;
        		proxy_cache_valid 200 3d;
        		proxy_cache_valid 301 302 1d;
        		proxy_cache_valid any 3d;
        		proxy_cache_use_stale error http_500 http_502 http_503 http_504;
				proxy_connect_timeout   80; 
				proxy_send_timeout      80; 
				proxy_read_timeout      80; 
				client_max_body_size    35m;
				client_body_buffer_size 256k;
				proxy_buffer_size       256k;
				proxy_buffers           4 256k;
				proxy_busy_buffers_size 256k;
				proxy_temp_file_write_size      256k;
            	proxy_pass http://pmsdj_web;
        }
}





server {
        listen      443 ssl;
        server_name azure.lazabong.com rackspace.lazabong.com;
        index   index.jsp index.html index.htm;
        charset utf-8;
        access_log   off;
        access_log  logs/pmsdj-9005.access.log main;
        error_log   logs/pmsdj-9005.error.log;

  		ssl on;
    	ssl_certificate /usr/local/nginx/conf.d/ssl/lazabong.com/fullchain.pem;
    	ssl_certificate_key /usr/local/nginx/conf.d/ssl/lazabong.com/privkey.pem;
        location / {
           proxy_redirect          off; 
				proxy_set_header        Host            $host; 
				proxy_set_header        X-Real-IP       $remote_addr;
#				proxy_set_header        referer         "";
#    			proxy_set_header 		X-Forwarded-For $remote_addr;
				proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for; 
				proxy_connect_timeout   80; 
				proxy_send_timeout      80; 
				proxy_read_timeout      80; 
                client_max_body_size 300m;
				client_body_buffer_size 256k;
				proxy_buffer_size       256k;
				proxy_buffers           4 256k;
				proxy_busy_buffers_size 256k;
				proxy_temp_file_write_size      256k;
            proxy_pass http://pmsdj_9005;
        }
}



server {
        listen      9001;
        server_name www.lazabong.com;
        index   index.jsp index.html index.htm;
        charset utf-8;
        access_log  logs/pmsdj-9001.access.log main;
        access_log  logs/pmsdj-9001.logstash.access.log logstash;
        error_log   logs/pmsdj-9001.error.log;

        location / {
           proxy_redirect          off; 
				proxy_set_header        Host            $host; 
				proxy_set_header        X-Real-IP       $remote_addr;
				proxy_set_header        referer         "";
				proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for; 
				proxy_connect_timeout   80; 
				proxy_send_timeout      80; 
				proxy_read_timeout      80; 
				client_max_body_size    35m;
				client_body_buffer_size 256k;
				proxy_buffer_size       256k;
				proxy_buffers           4 256k;
				proxy_busy_buffers_size 256k;
				proxy_temp_file_write_size      256k;
            proxy_pass http://pmsdj_9001;
        }
  location  ^~ /withdraw-proposal { 
            deny    all;
	}	
}

server {
        listen      9007;
        server_name www.lazabong.com;
        index   index.jsp index.html index.htm;
        charset utf-8;
        access_log  logs/pms2-9007.access.log main;
        access_log  logs/pms2-9007.logstash.access.log logstash;
  
    	ssl on;
    	ssl_certificate /usr/local/nginx/conf.d/ssl/lazabong.com/fullchain.pem;
    	ssl_certificate_key /usr/local/nginx/conf.d/ssl/lazabong.com/privkey.pem;
  
        location / {
           proxy_redirect          off; 
				proxy_set_header        Host            $host; 
				proxy_set_header        X-Real-IP       $remote_addr;
				proxy_set_header        referer         "";
				proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for; 
				proxy_connect_timeout   80; 
				proxy_send_timeout      80; 
				proxy_read_timeout      80; 
				client_max_body_size    35m;
				client_body_buffer_size 256k;
				proxy_buffer_size       256k;
				proxy_buffers           4 256k;
				proxy_busy_buffers_size 256k;
				proxy_temp_file_write_size      256k;
            proxy_pass http://pmsdj_9007;
        }
}




  
server {
        listen      9003;
        server_name www.lazabong.com;
        index   index.jsp index.html index.htm;
        charset utf-8;
        access_log  logs/pmsdj-9003.access.log main;
        access_log  logs/pmsdj-9003.logstash.access.log logstash;
        error_log   logs/pmsdj-9003.error.log;

        location / {
           proxy_redirect          off; 
				proxy_set_header        Host            $host; 
				proxy_set_header        X-Real-IP       $remote_addr;
				proxy_set_header        referer         "";
				proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for; 
				proxy_connect_timeout   80; 
				proxy_send_timeout      80; 
				proxy_read_timeout      80; 
				client_max_body_size    35m;
				client_body_buffer_size 256k;
				proxy_buffer_size       256k;
				proxy_buffers           4 256k;
				proxy_busy_buffers_size 256k;
				proxy_temp_file_write_size      256k;
            proxy_pass http://pmsdj_9003;
        }
}




