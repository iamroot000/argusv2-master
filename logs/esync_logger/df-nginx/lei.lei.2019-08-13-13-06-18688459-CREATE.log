--- /ansible/nginx/hostgroups/df-nginx/nginx/conf.d/global/upstream.conf	2019-08-13 12:59:19.443432002 +0800
+++ /tmp/upstream.conf	2019-08-13 13:06:18.579432002 +0800
@@ -1,4 +1,69 @@
+    upstream news_fsds {
+       # fastdfs
+       #ip_hash;
+       #server 47.75.43.168:886;
+       server 47.75.43.168:19001 max_fails=2 fail_timeout=10s weight=5 ;
+       server 47.75.43.168:19002 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:19003 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:19004 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:19005 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:19006 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:19007 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:19008 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:19009 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:19010 max_fails=2 fail_timeout=10s weight=5 backup;
 
+       }
+
+    upstream news_service {
+       #ip_hash; 
+       #news_service
+       server 47.75.43.168:16001 max_fails=2 fail_timeout=10s weight=5 ;
+       server 47.75.43.168:16002 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:16003 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:16004 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:16005 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:16006 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:16007 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:16008 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:16009 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:16010 max_fails=2 fail_timeout=10s weight=5 backup;
+
+        }
+
+
+
+
+    upstream news_admin {
+       #ip_hash;
+       #new_admin
+       #server 47.75.43.168:8081;
+       server 47.75.43.168:17001 max_fails=2 fail_timeout=10s weight=5 ;
+       server 47.75.43.168:17002 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:17003 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:17004 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:17005 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:17006 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:17007 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:17008 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:17009 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:17010 max_fails=2 fail_timeout=10s weight=5 backup;
+       }
+
+
+    upstream news_solr {
+       #solr :8083
+       server 47.75.43.168:18001 max_fails=2 fail_timeout=10s weight=5 ;
+       server 47.75.43.168:18002 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:18003 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:18004 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:18005 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:18006 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:18007 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:18008 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:18009 max_fails=2 fail_timeout=10s weight=5 backup;
+       server 47.75.43.168:18010 max_fails=2 fail_timeout=10s weight=5 backup;
+      }
 
 
 

