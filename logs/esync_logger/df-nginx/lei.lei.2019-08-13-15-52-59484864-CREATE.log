--- /ansible/nginx/hostgroups/df-nginx/nginx/conf.d/include/news_service.include	2019-08-13 13:08:11.721432002 +0800
+++ /tmp/news_service.include	2019-08-13 15:52:59.374475826 +0800
@@ -1,21 +1,36 @@
 
 
      location  / {
-       include /etc/nginx/conf.d/global/location_proxy_config.include;
+     proxy_set_header        Host            $http_host; 
+     proxy_set_header        X-Real-IP       $remote_addr;
+     proxy_set_header        X-Forwarded-For  $proxy_add_x_forwarded_for;
+     proxy_connect_timeout 180;
+     proxy_send_timeout 180;
+     proxy_read_timeout 180;
        proxy_pass http://news8082/guide;
     }
     location  /index {
-      proxy_set_header        Host            $http_host;
+       proxy_set_header        Host            $http_host;
        proxy_set_header        X-Real-IP       $remote_addr;
        proxy_set_header        X-Forwarded-For  $proxy_add_x_forwarded_for;
        proxy_pass http://news8082/index;
     }
     location ~* ^/(v|s).* {
-       include /etc/nginx/conf.d/global/location_proxy_config.include;
+      proxy_set_header        Host            $http_host;
+      proxy_set_header        X-Real-IP       $remote_addr;
+      proxy_set_header        X-Forwarded-For  $proxy_add_x_forwarded_for;
+      proxy_connect_timeout 180;
+      proxy_send_timeout 180;
+      proxy_read_timeout 180;
        proxy_pass http://news8082;
    }
     location ~* ^.*\.(js|ico|jpg|gif|png|css)$ {
-        include /etc/nginx/conf.d/global/location_proxy_static_config.include;
+      proxy_set_header        Host            $http_host;
+      proxy_set_header        X-Real-IP       $remote_addr;
+      proxy_set_header        X-Forwarded-For  $proxy_add_x_forwarded_for;
+      proxy_connect_timeout 180;
+      proxy_send_timeout 180;
+      proxy_read_timeout 180;
         proxy_pass  http://news8082;
         }
 

