--- /ansible/nginx/hostgroups/om-fpms_pms_nginx/nginx/conf.d/other/payhome.site.conf	2019-03-19 09:03:26.166391689 +0800
+++ /tmp/payhome.site.conf	2019-03-19 09:38:16.291391689 +0800
@@ -23,17 +23,27 @@
             proxy_pass http://pms2_web;
         }
 
-       location ~* .*\.(png|jpg|gif|jpeg|bmp|ico|css|js|json|exe)?$ {
-            proxy_next_upstream http_502 http_504 error timeout invalid_header;
-            proxy_cache cache_after;
-            proxy_cache_valid  200 304 2h;
-			#proxy_cache_valid any 30s;
-            proxy_cache_key $uri$is_args$args;
-            proxy_set_header Host  $host;
-            proxy_set_header X-Forwarded-For  $remote_addr;
-            #expires      30s;
-            proxy_pass http://pms2_web;
-    }
+        location ~* .*\.(png|jpg|gif|jpeg|bmp|ico)?$ {
+                proxy_next_upstream http_502 http_504 error timeout invalid_header;
+                proxy_cache cache_after;
+                proxy_cache_valid  200 206 304 301 302 12h;
+                proxy_cache_valid any 1m;
+                proxy_cache_key $uri$is_args$args;
+                proxy_set_header Host  $host;
+                proxy_set_header X-Forwarded-For  $remote_addr;
+                proxy_pass http://pms2_web;
+        }
+
+        location ~* .*\.(css|js|json)?$ {
+                proxy_next_upstream http_502 http_504 error timeout invalid_header;
+                proxy_cache cache_after;
+                proxy_cache_valid  200 304 2m;
+                proxy_cache_valid any 30s;
+                proxy_cache_key $uri$is_args$args;
+                proxy_set_header Host  $host;
+                proxy_set_header X-Forwarded-For  $remote_addr;
+                proxy_pass http://pms2_web;
+        }
 }
 
 server {

