--- /srv/Mirror-CPMS-ClientGameCalled__NginxForward/nginx/conf.d/other/gapi.conf	2018-09-19 16:43:12.648400183 +0800
+++ /tmp/gapi.conf	2018-10-16 16:42:14.604502733 +0800
@@ -393,6 +393,37 @@
 } # server end
 
 
+upstream ttgbackend {
+        server   ams-api.stg.ttms.co:8443 fail_timeout=10s; 
+}
+
+server {
+        listen       8443; #HTTP Port
+        server_name ams-api.stg.ttms.co;
+
+        charset utf-8;
+        access_log  logs/ttgbackend.access.log main;
+        error_log  logs/ttgbackend.error.log  ;
+
+
+        location / {
+	include /usr/local/nginx/conf.d/include/whitelistIP.include;
+        #include /usr/local/nginx/conf.d/include/proxy.conf.fwd.include ;
+		proxy_redirect off;
+		proxy_set_header        Host            $http_host;
+		proxy_set_header        X-Real-IP       $remote_addr;
+		proxy_set_header        X-Forwarded-For 23.99.114.30;
+		client_max_body_size    10m;
+		client_body_buffer_size 128k;
+		proxy_connect_timeout   90;
+		proxy_send_timeout      90;
+		proxy_read_timeout      90;
+		proxy_buffers           32 4k;
+                proxy_pass http://ttgbackend;
+        }
+
+
+    }
 
 
 

