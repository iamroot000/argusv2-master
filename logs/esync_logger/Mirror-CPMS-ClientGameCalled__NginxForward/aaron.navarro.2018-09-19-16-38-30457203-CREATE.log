upstream realcallbacksaba  {
#        server  203.192.151.12:7101 max_fails=2  fail_timeout=30s ;
#        server  203.177.198.116:7101 max_fails=2  fail_timeout=30s;
        server  101.78.133.212:7101 max_fails=2  fail_timeout=30s;
        server  205.177.199.12:7101 max_fails=2  fail_timeout=30s backup;


}

server {
    listen 80;
    server_name  callback.saba.authapi.net callbacktest.saba.authapi.net;
    rewrite     ^(.*)   https://$http_$host$1 permanent;
}

server {
        listen       443; #HTTP Port
        server_name  callback.saba.authapi.net;

        charset utf-8;
        access_log  logs/realcallbacksaba.access.log main;
        error_log  logs/realcallbacksaba.error.log  ;

        ssl on;
        ssl_certificate /usr/local/nginx/conf/ssl/authapi.net/fullchain.pem;
        ssl_certificate_key /usr/local/nginx/conf/ssl/authapi.net/privkey.pem;

        location / {
#		    include whitelistIP.conf;
	        include proxy.conf.fwd ;
	        proxy_next_upstream http_500 http_502 http_503 http_504 http_404 timeout invalid_header error;
		    proxy_pass http://realcallbacksaba;
        }

  }

upstream cstestcallbacksaba  {
#        server  203.192.151.12:7001 max_fails=2  fail_timeout=30s ;
#        server  203.177.198.116:7001 max_fails=2  fail_timeout=30s;
        server  101.78.133.212:7001 max_fails=2  fail_timeout=30s;
        server  205.177.199.12:7001 max_fails=2  fail_timeout=30s backup;


}

server {
        listen       443; #HTTP Port
        server_name  callbacktest.saba.authapi.net;

        charset utf-8;
        access_log  logs/cstestcallbacksaba.access.log main;
        error_log  logs/cstestcallbacksaba.error.log  ;

        ssl on;
        ssl_certificate /usr/local/nginx/conf/ssl/authapi.net/fullchain.pem;
        ssl_certificate_key /usr/local/nginx/conf/ssl/authapi.net/privkey.pem;

        location / {
#           include whitelistIP.conf;
            include proxy.conf.fwd ;
            proxy_next_upstream http_500 http_502 http_503 http_504 http_404 timeout invalid_header error;
            proxy_pass http://cstestcallbacksaba;
        }

  }



