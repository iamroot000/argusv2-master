server {
        listen 80;
        server_name api.pt8b2b.com;	### resolves to 23.99.114.30 inside GDC and HK ###
        ssl off;
        access_log logs/ptbbet.access.log main;
	error_log  logs/ptbbet.error.log;

        if ($request_method !~* GET|POST|HEAD) {
                return 403;
        }

        location / {
	include whitelistIP.conf;
#           include proxy.conf.gameapi;
#          proxy_next_upstream http_502 http_504 http_404 error timeout invalid_header;
        proxy_redirect          off;
        proxy_set_header        Host            $host;
        proxy_set_header        X-Real-IP       $remote_addr;
        proxy_set_header        referer         "";
        proxy_set_header        X-Forwarded-For 203.192.151.10;
        proxy_connect_timeout   300;
        proxy_send_timeout      300;
        proxy_read_timeout      300;
        client_max_body_size    30m;
        client_body_buffer_size 256k;
        proxy_buffer_size       256k;
        proxy_buffers           4 256k;
        proxy_busy_buffers_size 256k;
        proxy_temp_file_write_size      256k;
        proxy_pass   http://api.pt8b2b.com;	### resolves to PT-sunrise IP outside GDC and HK ###
        #proxy_pass   http://ptbbet;
        #proxy_pass   http://pt8b2b.com.cloud99.cc;
        }

location ~* (conf|logs|lib|work|temp|bin)/{
        return 444;
        }

}

