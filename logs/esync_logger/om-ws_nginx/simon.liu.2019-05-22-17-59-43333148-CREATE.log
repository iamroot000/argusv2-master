--- /ansible/nginx/hostgroups/om-ws_nginx/nginx/conf.d/include/ws_official_masterconfig.include	2019-05-22 17:53:51.459255189 +0800
+++ /tmp/ws_official_masterconfig.include	2019-05-22 17:59:43.234255189 +0800
@@ -1,3 +1,21 @@
+index   index.jsp index.html index.htm;
+access_log  logs/ws.access.log main;
+access_log  logs/ws.logstash.access.log logstash;
+
+if ($http_user_agent ~* "qihoobot|Yahoo! Slurp|Yahoo! Slurp China|YoudaoBot|Sosospider|Sogou spider|Sogou web spider|MSNBot|ia_archiver|Tomato Bot")
+{
+	return 403;
+}
+
+limit_req zone=anti_spider burst=5 nodelay;
+if ($http_user_agent ~* "baiduspider") {
+set $anti_spider $http_user_agent;
+}
+
+if ($request_method !~* GET|POST|HEAD) {
+return 403;
+}
+
 if ($allowed_country ~ "no" ){
         set $test BLOCK;
 }

