PUPPET_COMMAND_START
 [WARNING]: Invalid characters were found in group names but not replaced, use
-vvvv to see details

PLAY [puppetmaster] ************************************************************


TASK [puppetmaster : Read hostvars] ********************************************
changed: [161.202.63.231 -> localhost]

TASK [puppetmaster : Create Json Template] *************************************
skipping: [161.202.63.231]


TASK [puppetmaster : Append Json Data] *****************************************
skipping: [161.202.63.231]

TASK [puppetmaster : remove ansible block] *************************************

skipping: [161.202.63.231]

TASK [puppetmaster : get value for iptables] ***********************************
changed: [161.202.63.231 -> localhost]


TASK [puppetmaster : check data] ***********************************************
ok: [161.202.63.231 -> localhost]

TASK [puppetmaster : get value for ssh_keys] ***********************************
changed: [161.202.63.231 -> localhost]


TASK [puppetmaster : check data] ***********************************************
ok: [161.202.63.231 -> localhost]

TASK [puppetmaster : get value for filebeat] ***********************************

changed: [161.202.63.231 -> localhost]

TASK [puppetmaster : check data] ***********************************************
ok: [161.202.63.231 -> localhost]


TASK [puppetmaster : stat] *****************************************************
skipping: [161.202.63.231]

TASK [puppetmaster : debug] ****************************************************
skipping: [161.202.63.231]


TASK [puppetmaster : stat] *****************************************************
skipping: [161.202.63.231]

TASK [puppetmaster : debug] ****************************************************

skipping: [161.202.63.231]

TASK [puppetmaster : stat] *****************************************************
skipping: [161.202.63.231]


TASK [puppetmaster : debug] ****************************************************
skipping: [161.202.63.231]

TASK [puppetmaster : stat] *****************************************************
skipping: [161.202.63.231]


TASK [puppetmaster : debug] ****************************************************
skipping: [161.202.63.231]

TASK [puppetmaster : set_fact] *************************************************

ok: [161.202.63.231]

TASK [puppetmaster : include_tasks] ********************************************
included: /ansible/puppet/roles/puppetmaster/tasks/puppetcreate.yml for 161.202.63.231


TASK [puppetmaster : Create sub directory] *************************************
ok: [161.202.63.231] => (item=modules)
ok: [161.202.63.231] => (item=manifests)

TASK [puppetmaster : Create IPTABLES Modules Manifests subdirectory] ***********

skipping: [161.202.63.231] => (item=manifests) 
skipping: [161.202.63.231] => (item=templates) 

TASK [puppetmaster : Create SSH_KEYS Modules Manifests subdirectory] ***********
skipping: [161.202.63.231] => (item=manifests) 

skipping: [161.202.63.231] => (item=templates) 

TASK [puppetmaster : Create STDLIB Modules Manifests subdirectory] *************
ok: [161.202.63.231]


TASK [puppetmaster : Create Filebeat Modules Manifests subdirectory] ***********
skipping: [161.202.63.231] => (item=manifests) 
skipping: [161.202.63.231] => (item=templates) 

TASK [puppetmaster : Provide puppet environment] *******************************

ok: [161.202.63.231]

TASK [puppetmaster : Check defaults manifests node] ****************************
ok: [161.202.63.231]


TASK [puppetmaster : Create defaults manifests] ********************************
skipping: [161.202.63.231]

TASK [puppetmaster : iptables modules] *****************************************
skipping: [161.202.63.231]


TASK [puppetmaster : ssh_keys modules] *****************************************
skipping: [161.202.63.231]

TASK [puppetmaster : filebeat modules] *****************************************

skipping: [161.202.63.231]

PLAY [51s-web] *****************************************************************

TASK [Gathering Facts] *********************************************************

ok: [47.56.227.89]
ok: [47.75.84.105]
ok: [47.244.204.220]
 [WARNING]: Unhandled error in Python interpreter discovery for host
162.209.152.178: Failed to connect to the host via ssh: Warning: Permanently

added '[162.209.152.178]:28032' (ECDSA) to the list of known hosts.  Permission
denied (publickey,password).
ok: [52.175.27.165]
fatal: [162.209.152.178]: UNREACHABLE! => {"changed": false, "msg": "Data could not be sent to remote host \"162.209.152.178\". Make sure this host can be reached over ssh: Warning: Permanently added '[162.209.152.178]:28032' (ECDSA) to the list of known hosts.\r\nPermission denied (publickey,password).\r\n", "unreachable": true}


TASK [add-repo : set_fact] *****************************************************
skipping: [52.175.27.165]
skipping: [47.244.204.220]
skipping: [47.56.227.89]
skipping: [47.75.84.105]


TASK [add-repo : Read hostvars] ************************************************
changed: [52.175.27.165 -> localhost]

TASK [add-repo : Create Json Template] *****************************************

skipping: [52.175.27.165]

TASK [add-repo : Append Json Data] *********************************************
skipping: [52.175.27.165]


TASK [add-repo : remove ansible block] *****************************************
skipping: [52.175.27.165]

TASK [add-repo : get value for iptables] ***************************************
changed: [52.175.27.165 -> localhost]


TASK [add-repo : check data] ***************************************************
ok: [52.175.27.165 -> localhost]

TASK [add-repo : get value for ssh_keys] ***************************************

changed: [52.175.27.165 -> localhost]

TASK [add-repo : check data] ***************************************************
ok: [52.175.27.165 -> localhost]


TASK [add-repo : get value for filebeat] ***************************************
changed: [52.175.27.165 -> localhost]

TASK [add-repo : check data] ***************************************************
ok: [52.175.27.165 -> localhost]


TASK [add-repo : Copy Centos Base Repo] ****************************************
skipping: [52.175.27.165]
skipping: [47.244.204.220]
skipping: [47.56.227.89]

skipping: [47.75.84.105]

TASK [add-repo : install the latest version of yum-utils] **********************
ok: [47.244.204.220]
ok: [47.56.227.89]

ok: [47.75.84.105]
 [WARNING]: Could not find aptitude. Using apt-get instead
ok: [52.175.27.165]

TASK [add-repo : check if puppet is installed] *********************************

fatal: [52.175.27.165]: FAILED! => {"ansible_facts": {"pkg_mgr": "apt"}, "changed": false, "msg": "Unsupported parameters for (apt) module: list Supported parameters include: allow_unauthenticated, autoclean, autoremove, cache_valid_time, deb, default_release, dpkg_options, force, force_apt_get, install_recommends, only_upgrade, package, policy_rc_d, purge, state, update_cache, upgrade"}
...ignoring
ok: [47.75.84.105]
ok: [47.244.204.220]
ok: [47.56.227.89]


TASK [add-repo : include_tasks] ************************************************
skipping: [52.175.27.165]
skipping: [47.244.204.220]
skipping: [47.56.227.89]

skipping: [47.75.84.105]

TASK [add-repo : include_tasks] ************************************************
skipping: [52.175.27.165]
skipping: [47.244.204.220]

skipping: [47.56.227.89]
skipping: [47.75.84.105]

TASK [add-repo : include_tasks] ************************************************
skipping: [52.175.27.165]

included: /ansible/puppet/roles/add-repo/tasks/rpm-repo-cen7-64-bit.yml for 47.244.204.220, 47.56.227.89, 47.75.84.105

TASK [add-repo : Install Epel repo] ********************************************
changed: [47.244.204.220]
changed: [47.56.227.89]

changed: [47.75.84.105]

TASK [add-repo : Install Rpm repo] *********************************************
ok: [47.244.204.220]
ok: [47.56.227.89]

ok: [47.75.84.105]

TASK [add-repo : Importing RPMForge Key] ***************************************
 [WARNING]: Consider using the yum, dnf or zypper module rather than running
'rpm'.  If you need to use command because yum, dnf or zypper is insufficient

you can add 'warn: false' to this command task or set 'command_warnings=False'
in ansible.cfg to get rid of this message.
changed: [47.244.204.220]
changed: [47.56.227.89]
changed: [47.75.84.105]


TASK [puppet : set_fact] *******************************************************
skipping: [52.175.27.165]
skipping: [47.244.204.220]
skipping: [47.56.227.89]

skipping: [47.75.84.105]

TASK [puppet : Read hostvars] **************************************************
changed: [52.175.27.165 -> localhost]


TASK [puppet : Create Json Template] *******************************************
skipping: [52.175.27.165]

TASK [puppet : Append Json Data] ***********************************************
skipping: [52.175.27.165]


TASK [puppet : remove ansible block] *******************************************
skipping: [52.175.27.165]

TASK [puppet : get value for iptables] *****************************************

changed: [52.175.27.165 -> localhost]

TASK [puppet : check data] *****************************************************
ok: [52.175.27.165 -> localhost]


TASK [puppet : get value for ssh_keys] *****************************************
changed: [52.175.27.165 -> localhost]

TASK [puppet : check data] *****************************************************
ok: [52.175.27.165 -> localhost]


TASK [puppet : get value for filebeat] *****************************************
changed: [52.175.27.165 -> localhost]

TASK [puppet : check data] *****************************************************

ok: [52.175.27.165 -> localhost]

TASK [puppet : set_fact] *******************************************************
ok: [52.175.27.165]
ok: [47.244.204.220]

ok: [47.56.227.89]
ok: [47.75.84.105]

TASK [puppet : install curl] ***************************************************
skipping: [47.244.204.220]

skipping: [47.56.227.89]
skipping: [47.75.84.105]
changed: [52.175.27.165]

TASK [puppet : Get IP] *********************************************************

changed: [47.244.204.220]
changed: [47.56.227.89]
changed: [47.75.84.105]
changed: [52.175.27.165]


TASK [puppet : Get If IP is here] **********************************************
changed: [52.175.27.165 -> 161.202.63.231]
fatal: [47.244.204.220 -> 161.202.63.231]: FAILED! => {"changed": true, "cmd": ["grep", "47.244.204.220", "/etc/puppetlabs/code/environments/51sweb/manifests/00-defaults.pp"], "delta": "0:00:00.044908", "end": "2020-03-03 10:08:58.322600", "msg": "non-zero return code", "rc": 1, "start": "2020-03-03 10:08:58.277692", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
...ignoring
fatal: [47.56.227.89 -> 161.202.63.231]: FAILED! => {"changed": true, "cmd": ["grep", "47.56.227.89", "/etc/puppetlabs/code/environments/51sweb/manifests/00-defaults.pp"], "delta": "0:00:00.043716", "end": "2020-03-03 10:08:58.454388", "msg": "non-zero return code", "rc": 1, "start": "2020-03-03 10:08:58.410672", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}

...ignoring
fatal: [47.75.84.105 -> 161.202.63.231]: FAILED! => {"changed": true, "cmd": ["grep", "47.75.84.105", "/etc/puppetlabs/code/environments/51sweb/manifests/00-defaults.pp"], "delta": "0:00:00.043009", "end": "2020-03-03 10:08:58.587636", "msg": "non-zero return code", "rc": 1, "start": "2020-03-03 10:08:58.544627", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
...ignoring

TASK [puppet : check if environment] *******************************************

fatal: [47.244.204.220]: FAILED! => {"changed": true, "cmd": ["grep", "51sweb", "/etc/puppetlabs/puppet/puppet.conf"], "delta": "0:00:00.018985", "end": "2020-03-03 10:08:59.587427", "msg": "non-zero return code", "rc": 2, "start": "2020-03-03 10:08:59.568442", "stderr": "grep: /etc/puppetlabs/puppet/puppet.conf: No such file or directory", "stderr_lines": ["grep: /etc/puppetlabs/puppet/puppet.conf: No such file or directory"], "stdout": "", "stdout_lines": []}
...ignoring
fatal: [47.56.227.89]: FAILED! => {"changed": true, "cmd": ["grep", "51sweb", "/etc/puppetlabs/puppet/puppet.conf"], "delta": "0:00:00.019231", "end": "2020-03-03 10:08:59.723489", "msg": "non-zero return code", "rc": 2, "start": "2020-03-03 10:08:59.704258", "stderr": "grep: /etc/puppetlabs/puppet/puppet.conf: No such file or directory", "stderr_lines": ["grep: /etc/puppetlabs/puppet/puppet.conf: No such file or directory"], "stdout": "", "stdout_lines": []}
...ignoring
fatal: [47.75.84.105]: FAILED! => {"changed": true, "cmd": ["grep", "51sweb", "/etc/puppetlabs/puppet/puppet.conf"], "delta": "0:00:00.019343", "end": "2020-03-03 10:08:59.812760", "msg": "non-zero return code", "rc": 2, "start": "2020-03-03 10:08:59.793417", "stderr": "grep: /etc/puppetlabs/puppet/puppet.conf: No such file or directory", "stderr_lines": ["grep: /etc/puppetlabs/puppet/puppet.conf: No such file or directory"], "stdout": "", "stdout_lines": []}

...ignoring
changed: [52.175.27.165]

TASK [puppet : pv] *************************************************************
fatal: [47.244.204.220]: FAILED! => {"changed": true, "cmd": "/opt/puppetlabs/bin/puppet --version", "delta": "0:00:00.019017", "end": "2020-03-03 10:09:02.820105", "msg": "non-zero return code", "rc": 127, "start": "2020-03-03 10:09:02.801088", "stderr": "/bin/sh: /opt/puppetlabs/bin/puppet: No such file or directory", "stderr_lines": ["/bin/sh: /opt/puppetlabs/bin/puppet: No such file or directory"], "stdout": "", "stdout_lines": []}

...ignoring
fatal: [47.56.227.89]: FAILED! => {"changed": true, "cmd": "/opt/puppetlabs/bin/puppet --version", "delta": "0:00:00.018871", "end": "2020-03-03 10:09:02.957697", "msg": "non-zero return code", "rc": 127, "start": "2020-03-03 10:09:02.938826", "stderr": "/bin/sh: /opt/puppetlabs/bin/puppet: No such file or directory", "stderr_lines": ["/bin/sh: /opt/puppetlabs/bin/puppet: No such file or directory"], "stdout": "", "stdout_lines": []}
...ignoring
fatal: [47.75.84.105]: FAILED! => {"changed": true, "cmd": "/opt/puppetlabs/bin/puppet --version", "delta": "0:00:00.019218", "end": "2020-03-03 10:09:03.063340", "msg": "non-zero return code", "rc": 127, "start": "2020-03-03 10:09:03.044122", "stderr": "/bin/sh: /opt/puppetlabs/bin/puppet: No such file or directory", "stderr_lines": ["/bin/sh: /opt/puppetlabs/bin/puppet: No such file or directory"], "stdout": "", "stdout_lines": []}
...ignoring

changed: [52.175.27.165]

TASK [puppet : get data] *******************************************************
skipping: [52.175.27.165]
skipping: [47.244.204.220]

skipping: [47.56.227.89]
skipping: [47.75.84.105]

TASK [puppet : get data] *******************************************************
ok: [52.175.27.165]

ok: [47.244.204.220]
ok: [47.56.227.89]
ok: [47.75.84.105]

TASK [puppet : include_tasks] **************************************************

skipping: [52.175.27.165]
included: /ansible/puppet/roles/puppet/tasks/remove3.yml for 47.244.204.220, 47.56.227.89, 47.75.84.105

TASK [puppet : Remove Old Puppet Service] **************************************
ok: [47.244.204.220]

ok: [47.56.227.89]
ok: [47.75.84.105]

TASK [puppet : Remove Old Puppet Repository] ***********************************
ok: [47.56.227.89]

ok: [47.244.204.220]
ok: [47.75.84.105]

TASK [puppet : Remove Old Puppet Files] ****************************************
ok: [47.244.204.220] => (item=/var/lib/puppet)

ok: [47.56.227.89] => (item=/var/lib/puppet)
ok: [47.75.84.105] => (item=/var/lib/puppet)
ok: [47.244.204.220] => (item=/etc/puppet)
ok: [47.56.227.89] => (item=/etc/puppet)
ok: [47.75.84.105] => (item=/etc/puppet)


TASK [puppet : include_tasks] **************************************************
skipping: [52.175.27.165]
included: /ansible/puppet/roles/puppet/tasks/remove.yml for 47.244.204.220, 47.56.227.89, 47.75.84.105


TASK [puppet : Remove for Now] *************************************************
ok: [47.244.204.220]
ok: [47.56.227.89]
ok: [47.75.84.105]


TASK [puppet : Install Puppet Repository] **************************************
skipping: [47.244.204.220]
skipping: [47.56.227.89]
skipping: [47.75.84.105]


TASK [puppet : Install Puppet Repository] **************************************
changed: [47.56.227.89]
changed: [47.244.204.220]
changed: [47.75.84.105]



TASK [puppet : Run the equivalent of "apt-get update" as a separate step] ******
changed: [52.175.27.165]

TASK [puppet : Install the package "foo"] **************************************

MAX RETRIES EXECUTED, COMMAND NOT RESPONDINGTASK [puppet : Install Puppet Service] *****************************************
skipping: [47.244.204.220]
skipping: [47.56.227.89]
skipping: [47.75.84.105]


TASK [puppet : Install Puppet Service] *****************************************
changed: [47.244.204.220]
changed: [47.75.84.105]
changed: [47.56.227.89]


TASK [puppet : include_tasks] **************************************************
skipping: [47.244.204.220]
skipping: [47.56.227.89]
skipping: [47.75.84.105]
included: /ansible/puppet/roles/puppet/tasks/ubuntu.yml for 52.175.27.165


TASK [puppet : Install Puppet Repository] **************************************
 [WARNING]: Consider using the get_url or uri module rather than running
'wget'.  If you need to use command because get_url or uri is insufficient you
can add 'warn: false' to this command task or set 'command_warnings=False' in

ansible.cfg to get rid of this message.
changed: [52.175.27.165]

TASK [puppet : Install Puppet Repository] **************************************
changed: [52.175.27.165]

