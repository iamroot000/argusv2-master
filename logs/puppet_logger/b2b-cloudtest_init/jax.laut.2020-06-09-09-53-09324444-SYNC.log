PUPPET_COMMAND_START
 [WARNING]: Invalid characters were found in group names but not replaced, use
-vvvv to see details

PLAY [b2b-cloudtest_init] ******************************************************


TASK [setup] *******************************************************************
ok: [47.52.1.250]

PLAY [puppmaster-b2b] **********************************************************


TASK [puppetmaster : Read hostvars] ********************************************
changed: [puppmaster-b2b -> localhost]

TASK [puppetmaster : Create Json Template] *************************************
skipping: [puppmaster-b2b]


TASK [puppetmaster : Append Json Data] *****************************************
skipping: [puppmaster-b2b]

TASK [puppetmaster : remove ansible block] *************************************

skipping: [puppmaster-b2b]

TASK [puppetmaster : get value for iptables] ***********************************
changed: [puppmaster-b2b -> localhost]


TASK [puppetmaster : check data] ***********************************************
ok: [puppmaster-b2b -> localhost]

TASK [puppetmaster : get value for ssh_keys] ***********************************
changed: [puppmaster-b2b -> localhost]


TASK [puppetmaster : check data] ***********************************************
ok: [puppmaster-b2b -> localhost]

TASK [puppetmaster : get value for filebeat] ***********************************

changed: [puppmaster-b2b -> localhost]

TASK [puppetmaster : check data] ***********************************************
ok: [puppmaster-b2b -> localhost]


TASK [puppetmaster : stat] *****************************************************
skipping: [puppmaster-b2b]

TASK [puppetmaster : debug] ****************************************************
skipping: [puppmaster-b2b]


TASK [puppetmaster : stat] *****************************************************
ok: [puppmaster-b2b -> localhost]

TASK [puppetmaster : debug] ****************************************************

skipping: [puppmaster-b2b]

TASK [puppetmaster : stat] *****************************************************
ok: [puppmaster-b2b -> localhost]


TASK [puppetmaster : debug] ****************************************************
skipping: [puppmaster-b2b]

TASK [puppetmaster : stat] *****************************************************
skipping: [puppmaster-b2b]


TASK [puppetmaster : debug] ****************************************************
skipping: [puppmaster-b2b]

TASK [puppetmaster : set_fact] *************************************************

ok: [puppmaster-b2b]

TASK [puppetmaster : include_tasks] ********************************************
included: /ansible/puppet/roles/puppetmaster/tasks/puppetcreate.yml for puppmaster-b2b


TASK [puppetmaster : Create sub directory] *************************************
ok: [puppmaster-b2b] => (item=modules)
ok: [puppmaster-b2b] => (item=manifests)

TASK [puppetmaster : Create IPTABLES Modules Manifests subdirectory] ***********

skipping: [puppmaster-b2b] => (item=manifests) 
skipping: [puppmaster-b2b] => (item=templates) 

TASK [puppetmaster : Create SSH_KEYS Modules Manifests subdirectory] ***********
ok: [puppmaster-b2b] => (item=manifests)

ok: [puppmaster-b2b] => (item=templates)

TASK [puppetmaster : Create STDLIB Modules Manifests subdirectory] *************
ok: [puppmaster-b2b]


TASK [puppetmaster : Create Filebeat Modules Manifests subdirectory] ***********
skipping: [puppmaster-b2b] => (item=manifests) 
skipping: [puppmaster-b2b] => (item=templates) 

TASK [puppetmaster : Provide puppet environment] *******************************

ok: [puppmaster-b2b]

TASK [puppetmaster : Check defaults manifests node] ****************************
ok: [puppmaster-b2b]


TASK [puppetmaster : Create defaults manifests] ********************************
skipping: [puppmaster-b2b]

TASK [puppetmaster : iptables modules] *****************************************
skipping: [puppmaster-b2b]


TASK [puppetmaster : ssh_keys modules] *****************************************
included: /ansible/puppet/roles/puppetmaster/tasks/ssh_keys.yml for puppmaster-b2b

TASK [puppetmaster : Get Additional IP] ****************************************

changed: [puppmaster-b2b -> localhost]

TASK [puppetmaster : User] *****************************************************
ok: [puppmaster-b2b]


TASK [puppetmaster : User] *****************************************************
ok: [puppmaster-b2b]

TASK [puppetmaster : ssh-password-auth] ****************************************
skipping: [puppmaster-b2b]


TASK [puppetmaster : Append users] *********************************************
skipping: [puppmaster-b2b]

TASK [puppetmaster : Append users b2b dc] **************************************

fatal: [puppmaster-b2b]: FAILED! => {"msg": "The conditional check '('b2b-' in project) and ('.hk.dc.monaco1.me' in ansible_fqdn)' failed. The error was: error while evaluating conditional (('b2b-' in project) and ('.hk.dc.monaco1.me' in ansible_fqdn)): Unable to look up a name or access an attribute in template string ({% if ('b2b-' in project) and ('.hk.dc.monaco1.me' in ansible_fqdn) %} True {% else %} False {% endif %}).\nMake sure your variable name does not contain invalid characters like '-': argument of type 'AnsibleUndefined' is not iterable\n\nThe error appears to be in '/ansible/puppet/roles/puppetmaster/tasks/ssh_keys.yml': line 27, column 6, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n   - name: Append users b2b dc\n     ^ here\n"}

PLAY RECAP *********************************************************************
47.52.1.250                : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
puppmaster-b2b             : ok=20   changed=5    unreachable=0    failed=1    skipped=15   rescued=0    ignored=0   



PUPPET_COMMAND_END
MAX RETRIES EXECUTED, COMMAND NOT RESPONDING