PUPPET_COMMAND_START
 [WARNING]: Invalid characters were found in group names but not replaced, use
-vvvv to see details

PLAY [puppmaster-b2b] **********************************************************


TASK [puppetmaster : get hostname] *********************************************
changed: [puppmaster-b2b -> localhost]

TASK [puppetmaster : Read hostvars] ********************************************
changed: [puppmaster-b2b -> localhost]


TASK [puppetmaster : Create Json Template] *************************************
skipping: [puppmaster-b2b]

TASK [puppetmaster : Append Json Data] *****************************************

skipping: [puppmaster-b2b]

TASK [puppetmaster : remove ansible block] *************************************
skipping: [puppmaster-b2b]


TASK [puppetmaster : get value for iptables] ***********************************
changed: [puppmaster-b2b -> localhost]

TASK [puppetmaster : check data] ***********************************************
ok: [puppmaster-b2b -> localhost]


TASK [puppetmaster : get value for ssh_keys] ***********************************
changed: [puppmaster-b2b -> localhost]

TASK [puppetmaster : check data] ***********************************************

ok: [puppmaster-b2b -> localhost]

TASK [puppetmaster : get value for filebeat] ***********************************
changed: [puppmaster-b2b -> localhost]


TASK [puppetmaster : check data] ***********************************************
ok: [puppmaster-b2b -> localhost]

TASK [puppetmaster : stat] *****************************************************
skipping: [puppmaster-b2b]


TASK [puppetmaster : debug] ****************************************************
skipping: [puppmaster-b2b]

TASK [puppetmaster : stat] *****************************************************

ok: [puppmaster-b2b -> localhost]

TASK [puppetmaster : debug] ****************************************************
skipping: [puppmaster-b2b]


TASK [puppetmaster : stat] *****************************************************
ok: [puppmaster-b2b -> localhost]

TASK [puppetmaster : debug] ****************************************************
skipping: [puppmaster-b2b]


TASK [puppetmaster : stat] *****************************************************
skipping: [puppmaster-b2b]

TASK [puppetmaster : debug] ****************************************************

skipping: [puppmaster-b2b]

TASK [puppetmaster : set_fact] *************************************************
ok: [puppmaster-b2b]


TASK [puppetmaster : include_tasks] ********************************************
included: /ansible/puppet/roles/puppetmaster/tasks/puppetcreate.yml for puppmaster-b2b

TASK [puppetmaster : Create sub directory] *************************************
changed: [puppmaster-b2b] => (item=modules)

changed: [puppmaster-b2b] => (item=manifests)

TASK [puppetmaster : Create IPTABLES Modules Manifests subdirectory] ***********
skipping: [puppmaster-b2b] => (item=manifests) 
skipping: [puppmaster-b2b] => (item=templates) 


TASK [puppetmaster : Create SSH_KEYS Modules Manifests subdirectory] ***********
changed: [puppmaster-b2b] => (item=manifests)
changed: [puppmaster-b2b] => (item=templates)


TASK [puppetmaster : Create STDLIB Modules Manifests subdirectory] *************
changed: [puppmaster-b2b]

TASK [puppetmaster : Create Filebeat Modules Manifests subdirectory] ***********
skipping: [puppmaster-b2b] => (item=manifests) 

skipping: [puppmaster-b2b] => (item=templates) 

TASK [puppetmaster : Provide puppet environment] *******************************
changed: [puppmaster-b2b]


TASK [puppetmaster : Check defaults manifests node] ****************************
ok: [puppmaster-b2b]

TASK [puppetmaster : Create defaults manifests] ********************************
changed: [puppmaster-b2b]


TASK [puppetmaster : iptables modules] *****************************************
skipping: [puppmaster-b2b]

TASK [puppetmaster : ssh_keys modules] *****************************************

included: /ansible/puppet/roles/puppetmaster/tasks/ssh_keys.yml for puppmaster-b2b

TASK [puppetmaster : Get Additional IP] ****************************************
changed: [puppmaster-b2b -> localhost]


TASK [puppetmaster : User] *****************************************************
ok: [puppmaster-b2b]

TASK [puppetmaster : User] *****************************************************
ok: [puppmaster-b2b]


TASK [puppetmaster : ssh-password-auth] ****************************************
skipping: [puppmaster-b2b]

TASK [puppetmaster : Append users] *********************************************

skipping: [puppmaster-b2b]

TASK [puppetmaster : Append users b2b dc] **************************************
skipping: [puppmaster-b2b]


TASK [puppetmaster : Append users b2b] *****************************************
ok: [puppmaster-b2b]

TASK [puppetmaster : Get sshd config config] ***********************************
changed: [puppmaster-b2b]


TASK [puppetmaster : Get sshd puppet] ******************************************
changed: [puppmaster-b2b]

TASK [puppetmaster : Get ssh keys] *********************************************

changed: [puppmaster-b2b]

TASK [puppetmaster : Get ssh keys] *********************************************
changed: [puppmaster-b2b]


TASK [puppetmaster : Get ssh root keys] ****************************************
changed: [puppmaster-b2b]

TASK [puppetmaster : filebeat modules] *****************************************
skipping: [puppmaster-b2b]


PLAY [b2b-srssource_slave] *****************************************************

TASK [Gathering Facts] *********************************************************
ok: [172.16.12.108]

ok: [172.16.12.103]
ok: [172.16.12.104]
ok: [172.16.12.106]

TASK [add-repo : set_fact] *****************************************************

ok: [172.16.12.103]
ok: [172.16.12.104]
ok: [172.16.12.106]
ok: [172.16.12.108]


TASK [add-repo : Read hostvars] ************************************************
changed: [172.16.12.103 -> localhost]

TASK [add-repo : Create Json Template] *****************************************
skipping: [172.16.12.103]


TASK [add-repo : Append Json Data] *********************************************
skipping: [172.16.12.103]

TASK [add-repo : remove ansible block] *****************************************

skipping: [172.16.12.103]

TASK [add-repo : get value for iptables] ***************************************
changed: [172.16.12.103 -> localhost]


TASK [add-repo : check data] ***************************************************
ok: [172.16.12.103 -> localhost]

TASK [add-repo : get value for ssh_keys] ***************************************
changed: [172.16.12.103 -> localhost]


TASK [add-repo : check data] ***************************************************
ok: [172.16.12.103 -> localhost]

TASK [add-repo : get value for filebeat] ***************************************

changed: [172.16.12.103 -> localhost]

TASK [add-repo : check data] ***************************************************
ok: [172.16.12.103 -> localhost]


TASK [add-repo : Copy Centos Base Repo] ****************************************
changed: [172.16.12.103]
changed: [172.16.12.104]
changed: [172.16.12.106]
changed: [172.16.12.108]


TASK [add-repo : install the latest version of yum-utils] **********************
ok: [172.16.12.108]
ok: [172.16.12.104]
ok: [172.16.12.103]

ok: [172.16.12.106]

TASK [add-repo : check if puppet is installed] *********************************
 [WARNING]: Consider using the yum module rather than running 'yum'.  If you
need to use command because yum is insufficient you can add 'warn: false' to

this command task or set 'command_warnings=False' in ansible.cfg to get rid of
this message.
fatal: [172.16.12.103]: FAILED! => {"changed": true, "cmd": "yum list installed|grep puppet-agent", "delta": "0:00:00.229680", "end": "2020-06-22 16:23:17.978830", "msg": "non-zero return code", "rc": 1, "start": "2020-06-22 16:23:17.749150", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
...ignoring
fatal: [172.16.12.104]: FAILED! => {"changed": true, "cmd": "yum list installed|grep puppet-agent", "delta": "0:00:00.558403", "end": "2020-06-22 16:23:18.457452", "msg": "non-zero return code", "rc": 1, "start": "2020-06-22 16:23:17.899049", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}

...ignoring
fatal: [172.16.12.106]: FAILED! => {"changed": true, "cmd": "yum list installed|grep puppet-agent", "delta": "0:00:00.609925", "end": "2020-06-22 16:23:18.651969", "msg": "non-zero return code", "rc": 1, "start": "2020-06-22 16:23:18.042044", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
...ignoring
fatal: [172.16.12.108]: FAILED! => {"changed": true, "cmd": "yum list installed|grep puppet-agent", "delta": "0:00:00.583496", "end": "2020-06-22 16:23:18.716583", "msg": "non-zero return code", "rc": 1, "start": "2020-06-22 16:23:18.133087", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
...ignoring


TASK [add-repo : include_tasks] ************************************************
skipping: [172.16.12.103]
skipping: [172.16.12.104]
skipping: [172.16.12.106]

skipping: [172.16.12.108]

TASK [add-repo : include_tasks] ************************************************
included: /ansible/puppet/roles/add-repo/tasks/rpm-repo-cen6-64-bit.yml for 172.16.12.103, 172.16.12.104, 172.16.12.106, 172.16.12.108


TASK [add-repo : Install Epel repo] ********************************************
changed: [172.16.12.106]
changed: [172.16.12.108]
changed: [172.16.12.104]
changed: [172.16.12.103]


TASK [add-repo : Install Rpm repo] *********************************************
fatal: [172.16.12.104]: FAILED! => {"changed": false, "changes": {"installed": ["/root/.ansible/tmp/ansible-moduletmp-1592814206.06-ahxS5l/rpmforge-release-0.5.3-1.el6.rf.x86_64tYpdGT.rpm"]}, "msg": "Error: Cannot retrieve metalink for repository: epel. Please verify its path and try again\n", "rc": 1, "results": ["Loaded plugins: fastestmirror\nSetting up Install Process\nExamining /root/.ansible/tmp/ansible-moduletmp-1592814206.06-ahxS5l/rpmforge-release-0.5.3-1.el6.rf.x86_64tYpdGT.rpm: rpmforge-release-0.5.3-1.el6.rf.x86_64\nMarking /root/.ansible/tmp/ansible-moduletmp-1592814206.06-ahxS5l/rpmforge-release-0.5.3-1.el6.rf.x86_64tYpdGT.rpm to be installed\nLoading mirror speeds from cached hostfile\n"]}
changed: [172.16.12.103]
fatal: [172.16.12.108]: FAILED! => {"changed": false, "changes": {"installed": ["/root/.ansible/tmp/ansible-moduletmp-1592814206.36-bkWyEK/rpmforge-release-0.5.3-1.el6.rf.x86_64B9uAMh.rpm"]}, "msg": "Error: Cannot retrieve metalink for repository: epel. Please verify its path and try again\n", "rc": 1, "results": ["Loaded plugins: fastestmirror\nSetting up Install Process\nExamining /root/.ansible/tmp/ansible-moduletmp-1592814206.36-bkWyEK/rpmforge-release-0.5.3-1.el6.rf.x86_64B9uAMh.rpm: rpmforge-release-0.5.3-1.el6.rf.x86_64\nMarking /root/.ansible/tmp/ansible-moduletmp-1592814206.36-bkWyEK/rpmforge-release-0.5.3-1.el6.rf.x86_64B9uAMh.rpm to be installed\nLoading mirror speeds from cached hostfile\n"]}

fatal: [172.16.12.106]: FAILED! => {"changed": false, "changes": {"installed": ["/root/.ansible/tmp/ansible-moduletmp-1592814206.24-xehuCj/rpmforge-release-0.5.3-1.el6.rf.x86_644q7ixA.rpm"]}, "msg": "Error: Cannot retrieve metalink for repository: epel. Please verify its path and try again\n", "rc": 1, "results": ["Loaded plugins: fastestmirror\nSetting up Install Process\nExamining /root/.ansible/tmp/ansible-moduletmp-1592814206.24-xehuCj/rpmforge-release-0.5.3-1.el6.rf.x86_644q7ixA.rpm: rpmforge-release-0.5.3-1.el6.rf.x86_64\nMarking /root/.ansible/tmp/ansible-moduletmp-1592814206.24-xehuCj/rpmforge-release-0.5.3-1.el6.rf.x86_644q7ixA.rpm to be installed\nLoading mirror speeds from cached hostfile\n"]}

TASK [add-repo : Importing RPMForge Key] ***************************************
 [WARNING]: Consider using the yum, dnf or zypper module rather than running
'rpm'.  If you need to use command because yum, dnf or zypper is insufficient

you can add 'warn: false' to this command task or set 'command_warnings=False'
in ansible.cfg to get rid of this message.
changed: [172.16.12.103]

TASK [add-repo : include_tasks] ************************************************

skipping: [172.16.12.103]

TASK [puppet : set_fact] *******************************************************
ok: [172.16.12.103]


TASK [puppet : Read hostvars] **************************************************
changed: [172.16.12.103 -> localhost]

TASK [puppet : Create Json Template] *******************************************
skipping: [172.16.12.103]


TASK [puppet : Append Json Data] ***********************************************
skipping: [172.16.12.103]

TASK [puppet : remove ansible block] *******************************************

skipping: [172.16.12.103]

TASK [puppet : get value for iptables] *****************************************
changed: [172.16.12.103 -> localhost]


TASK [puppet : check data] *****************************************************
ok: [172.16.12.103 -> localhost]

TASK [puppet : get value for ssh_keys] *****************************************
changed: [172.16.12.103 -> localhost]


TASK [puppet : check data] *****************************************************
ok: [172.16.12.103 -> localhost]

TASK [puppet : get value for filebeat] *****************************************

changed: [172.16.12.103 -> localhost]

TASK [puppet : check data] *****************************************************
ok: [172.16.12.103 -> localhost]


TASK [puppet : set_fact] *******************************************************
ok: [172.16.12.103]

TASK [puppet : install curl] ***************************************************
skipping: [172.16.12.103]


TASK [puppet : Get IP b2b dc] **************************************************
changed: [172.16.12.103]

TASK [puppet : Get ipset] ******************************************************

ok: [172.16.12.103]

TASK [puppet : Get IP] *********************************************************
 [WARNING]: Consider using the get_url or uri module rather than running
'curl'.  If you need to use command because get_url or uri is insufficient you

can add 'warn: false' to this command task or set 'command_warnings=False' in
ansible.cfg to get rid of this message.
changed: [172.16.12.103]

TASK [puppet : Get ipset] ******************************************************

ok: [172.16.12.103]

TASK [puppet : Get ipset] ******************************************************
ok: [172.16.12.103] => {
    "msg": "61.244.211.20"

}

TASK [puppet : Get If IP is here] **********************************************
fatal: [172.16.12.103 -> 161.202.63.231]: FAILED! => {"changed": true, "cmd": ["grep", "61.244.211.20", "/etc/puppetlabs/code/environments/b2bsrssourceslave/manifests/00-defaults.pp"], "delta": "0:00:00.044864", "end": "2020-06-22 16:23:37.869701", "msg": "non-zero return code", "rc": 2, "start": "2020-06-22 16:23:37.824837", "stderr": "grep: /etc/puppetlabs/code/environments/b2bsrssourceslave/manifests/00-defaults.pp: No such file or directory", "stderr_lines": ["grep: /etc/puppetlabs/code/environments/b2bsrssourceslave/manifests/00-defaults.pp: No such file or directory"], "stdout": "", "stdout_lines": []}
...ignoring

MAX RETRIES EXECUTED, COMMAND NOT RESPONDING