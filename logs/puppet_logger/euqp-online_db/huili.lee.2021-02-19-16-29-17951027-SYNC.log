PUPPET_COMMAND_START
[WARNING]: Invalid characters were found in group names but not replaced, use
-vvvv to see details

PLAY [puppmaster-b2c] **********************************************************


TASK [puppetmaster : get hostname] *********************************************
changed: [puppmaster-b2c]

TASK [puppetmaster : Read hostvars] ********************************************
changed: [puppmaster-b2c]


TASK [puppetmaster : Create Json Template] *************************************
skipping: [puppmaster-b2c]

TASK [puppetmaster : Append Json Data] *****************************************

skipping: [puppmaster-b2c]

TASK [puppetmaster : remove ansible block] *************************************
skipping: [puppmaster-b2c]


TASK [puppetmaster : get value for iptables] ***********************************
changed: [puppmaster-b2c]

TASK [puppetmaster : check data] ***********************************************
ok: [puppmaster-b2c]


TASK [puppetmaster : get value for ssh_keys] ***********************************
changed: [puppmaster-b2c]

TASK [puppetmaster : check data] ***********************************************

ok: [puppmaster-b2c]

TASK [puppetmaster : get value for filebeat] ***********************************
changed: [puppmaster-b2c]


TASK [puppetmaster : check data] ***********************************************
ok: [puppmaster-b2c]

TASK [puppetmaster : stat] *****************************************************
ok: [puppmaster-b2c]


TASK [puppetmaster : debug] ****************************************************
skipping: [puppmaster-b2c]

TASK [puppetmaster : stat] *****************************************************

ok: [puppmaster-b2c]

TASK [puppetmaster : debug] ****************************************************
ok: [puppmaster-b2c] => {
    "msg": "THERE IS NO sshd_user ON /puppet/euqp-online_db/templates/"

}

PLAY [euqp-online_db] **********************************************************

TASK [add-repo : set_fact] *****************************************************

skipping: [40.83.94.249]
skipping: [168.63.149.41]

TASK [add-repo : Read hostvars] ************************************************
changed: [40.83.94.249]


TASK [add-repo : Create Json Template] *****************************************
skipping: [40.83.94.249]

TASK [add-repo : Append Json Data] *********************************************

skipping: [40.83.94.249]

TASK [add-repo : remove ansible block] *****************************************
skipping: [40.83.94.249]


TASK [add-repo : get value for iptables] ***************************************
changed: [40.83.94.249]

TASK [add-repo : check data] ***************************************************
ok: [40.83.94.249]


TASK [add-repo : get value for ssh_keys] ***************************************
changed: [40.83.94.249]

TASK [add-repo : check data] ***************************************************

ok: [40.83.94.249]

TASK [add-repo : get value for filebeat] ***************************************
changed: [40.83.94.249]


TASK [add-repo : check data] ***************************************************
ok: [40.83.94.249]

TASK [add-repo : Copy Centos Base Repo] ****************************************
skipping: [40.83.94.249]

skipping: [168.63.149.41]

TASK [add-repo : install the latest version of yum-utils] **********************
ok: [168.63.149.41]
ok: [40.83.94.249]


TASK [add-repo : check if puppet is installed] *********************************
[WARNING]: Consider using the yum module rather than running 'yum'.  If you
need to use command because yum is insufficient you can add 'warn: false' to
this command task or set 'command_warnings=False' in ansible.cfg to get rid of

this message.
changed: [168.63.149.41]
changed: [40.83.94.249]

TASK [add-repo : include_tasks] ************************************************

skipping: [40.83.94.249]
skipping: [168.63.149.41]

TASK [add-repo : include_tasks] ************************************************
skipping: [40.83.94.249]

skipping: [168.63.149.41]

TASK [add-repo : include_tasks] ************************************************
skipping: [40.83.94.249]
skipping: [168.63.149.41]


TASK [puppet : set_fact] *******************************************************
skipping: [40.83.94.249]
skipping: [168.63.149.41]


TASK [puppet : Read hostvars] **************************************************
changed: [40.83.94.249]

TASK [puppet : Create Json Template] *******************************************
skipping: [40.83.94.249]


TASK [puppet : Append Json Data] ***********************************************
skipping: [40.83.94.249]

TASK [puppet : remove ansible block] *******************************************

skipping: [40.83.94.249]

TASK [puppet : get value for iptables] *****************************************
changed: [40.83.94.249]


TASK [puppet : check data] *****************************************************
ok: [40.83.94.249]

TASK [puppet : get value for ssh_keys] *****************************************
changed: [40.83.94.249]


TASK [puppet : check data] *****************************************************
ok: [40.83.94.249]

TASK [puppet : get value for filebeat] *****************************************

changed: [40.83.94.249]

TASK [puppet : check data] *****************************************************
ok: [40.83.94.249]


TASK [puppet : set_fact] *******************************************************
ok: [40.83.94.249]
ok: [168.63.149.41]

TASK [puppet : install curl] ***************************************************

skipping: [40.83.94.249]
skipping: [168.63.149.41]

TASK [puppet : Get IP b2b dc] **************************************************
skipping: [40.83.94.249]

skipping: [168.63.149.41]

TASK [puppet : Get ipset] ******************************************************
skipping: [40.83.94.249]
skipping: [168.63.149.41]


TASK [puppet : Get IP b2b dc] **************************************************
skipping: [40.83.94.249]
skipping: [168.63.149.41]


TASK [puppet : Get ipset] ******************************************************
skipping: [40.83.94.249]
skipping: [168.63.149.41]

TASK [puppet : Get IP] *********************************************************

[WARNING]: Consider using the get_url or uri module rather than running 'curl'.
If you need to use command because get_url or uri is insufficient you can add
'warn: false' to this command task or set 'command_warnings=False' in
ansible.cfg to get rid of this message.
changed: [168.63.149.41]

changed: [40.83.94.249]

TASK [puppet : Get ipset] ******************************************************
ok: [40.83.94.249]
ok: [168.63.149.41]


TASK [puppet : Get ipset] ******************************************************
ok: [40.83.94.249] => {
    "msg": "40.83.94.249"
}

ok: [168.63.149.41] => {
    "msg": "168.63.149.41"
}

TASK [puppet : Get If IP is here] **********************************************

changed: [40.83.94.249 -> 161.202.63.231]
changed: [168.63.149.41 -> 161.202.63.231]

TASK [puppet : check if environment] *******************************************
changed: [168.63.149.41]

changed: [40.83.94.249]

TASK [puppet : pv] *************************************************************
changed: [168.63.149.41]
changed: [40.83.94.249]


TASK [puppet : get data] *******************************************************
skipping: [40.83.94.249]
skipping: [168.63.149.41]


TASK [puppet : get data] *******************************************************
ok: [40.83.94.249]
ok: [168.63.149.41]

TASK [puppet : include_tasks] **************************************************

skipping: [40.83.94.249]
skipping: [168.63.149.41]

TASK [remove puppet.conf for now] **********************************************
changed: [168.63.149.41]

changed: [40.83.94.249]

TASK [puppet : include_tasks] **************************************************
skipping: [40.83.94.249]
skipping: [168.63.149.41]


TASK [puppet : include_tasks] **************************************************
skipping: [40.83.94.249]
skipping: [168.63.149.41]


TASK [puppet : include_tasks] **************************************************
included: /docker/ansible/puppet/roles/puppet/tasks/pupmaster.yml for 40.83.94.249, 168.63.149.41

TASK [puppet : Get if ip exclude] **********************************************
fatal: [40.83.94.249]: FAILED! => {"changed": true, "cmd": "cat /ansible/puppet/ipexclude|grep 40.83.94.249", "delta": "0:00:00.039488", "end": "2021-02-19 16:29:36.839456", "msg": "non-zero return code", "rc": 1, "start": "2021-02-19 16:29:36.799968", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}

...ignoring
fatal: [168.63.149.41]: FAILED! => {"changed": true, "cmd": "cat /ansible/puppet/ipexclude|grep 168.63.149.41", "delta": "0:00:00.040919", "end": "2021-02-19 16:29:36.875660", "msg": "non-zero return code", "rc": 1, "start": "2021-02-19 16:29:36.834741", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
...ignoring

TASK [puppet : set ipexclude] **************************************************

skipping: [40.83.94.249]
skipping: [168.63.149.41]

TASK [puppet : ubuntu] *********************************************************
skipping: [40.83.94.249]

skipping: [168.63.149.41]

TASK [puppet : ebet] ***********************************************************
skipping: [40.83.94.249]
skipping: [168.63.149.41]


TASK [puppet : b2b] ************************************************************
skipping: [40.83.94.249]
skipping: [168.63.149.41]


TASK [puppet : Create append euqponlinedb manifests] ***************************
ok: [40.83.94.249]
ok: [168.63.149.41]

TASK [puppet : Create append euqponlinedb manifests] ***************************

skipping: [40.83.94.249]
skipping: [168.63.149.41]

TASK [puppet : Append to euqponlinedb manifests] *******************************
ok: [40.83.94.249 -> None]

ok: [168.63.149.41 -> None]

TASK [puppet : command] ********************************************************
changed: [40.83.94.249 -> None]
changed: [168.63.149.41 -> None]


TASK [puppet : reappend to euqponlinedb manifests] *****************************
skipping: [40.83.94.249]
skipping: [168.63.149.41]


TASK [puppet : reappend to euqponlinedb manifests again] ***********************
skipping: [40.83.94.249]
skipping: [168.63.149.41]

TASK [puppet : Removing iptables on node] **************************************

skipping: [40.83.94.249]
skipping: [168.63.149.41]

TASK [puppet : Removing nginx on node] *****************************************
skipping: [40.83.94.249]

skipping: [168.63.149.41]

TASK [puppet : Truncate Midpay] ************************************************
skipping: [40.83.94.249]
skipping: [168.63.149.41]


TASK [puppet : Removing sshkeys on node] ***************************************
skipping: [40.83.94.249]
skipping: [168.63.149.41]


TASK [puppet : Removing filebeat on node] **************************************
skipping: [40.83.94.249]
skipping: [168.63.149.41]

TASK [puppet : include_tasks] **************************************************

included: /docker/ansible/puppet/roles/puppet/tasks/pupconfig.yml for 40.83.94.249, 168.63.149.41

TASK [puppet : Change server if b2b] *******************************************
skipping: [40.83.94.249]
skipping: [168.63.149.41]


TASK [Add puppet conf] *********************************************************
changed: [168.63.149.41]
changed: [40.83.94.249]


TASK [puppet : include_tasks] **************************************************
skipping: [40.83.94.249]
skipping: [168.63.149.41]

TASK [puppet : include_tasks] **************************************************

included: /docker/ansible/puppet/roles/puppet/tasks/start.yml for 40.83.94.249, 168.63.149.41

TASK [Start service puppet, if not running] ************************************
ok: [168.63.149.41]
ok: [40.83.94.249]


TASK [Enable puppet services] **************************************************
ok: [168.63.149.41]
ok: [40.83.94.249]


PLAY [euqp-online_db] **********************************************************

TASK [Kill Old Puppet Agent] ***************************************************
changed: [168.63.149.41]
changed: [40.83.94.249]


TASK [Generate Puppet Cert] ****************************************************
changed: [168.63.149.41]
changed: [40.83.94.249]


TASK [Start service puppet, if not running] ************************************
changed: [168.63.149.41]
changed: [40.83.94.249]

PLAY [127.0.0.1] ***************************************************************


TASK [sync_to_git : Read hostvars] *********************************************
changed: [127.0.0.1]

TASK [sync_to_git : Create Json Template] **************************************

skipping: [127.0.0.1]

TASK [sync_to_git : Append Json Data] ******************************************
skipping: [127.0.0.1]


TASK [sync_to_git : remove ansible block] **************************************
skipping: [127.0.0.1]

TASK [sync_to_git : get value for iptables] ************************************
changed: [127.0.0.1]


TASK [sync_to_git : check data] ************************************************
ok: [127.0.0.1]

TASK [sync_to_git : get value for ssh_keys] ************************************

changed: [127.0.0.1]

TASK [sync_to_git : check data] ************************************************
ok: [127.0.0.1]


TASK [sync_to_git : get value for filebeat] ************************************
changed: [127.0.0.1]

TASK [sync_to_git : check data] ************************************************
ok: [127.0.0.1]


TASK [sync_to_git : Synchronizing Puppet template To GIT] **********************
fatal: [127.0.0.1]: FAILED! => {"changed": true, "cmd": "git add .\ngit commit -m \"huili.lee\"\ngit push  \ngit push -u origin master\n", "delta": "0:00:00.401515", "end": "2021-02-19 16:29:48.857490", "msg": "non-zero return code", "rc": 1, "start": "2021-02-19 16:29:48.455975", "stderr": "warning: push.default is unset; its implicit value is changing in\nGit 2.0 from 'matching' to 'simple'. To squelch this message\nand maintain the current behavior after the default changes, use:\n\n  git config --global push.default matching\n\nTo squelch this message and adopt the new behavior now, use:\n\n  git config --global push.default simple\n\nSee 'git help config' and search for 'push.default' for further information.\n(the 'simple' mode was introduced in Git 1.7.11. Use the similar mode\n'current' instead of 'simple' if you sometimes use older versions of Git)\n\nTo http://om:sPCJ-015@git.neweb.me/puppet_cloud/om-euqp_database.git\n ! [rejected]        master -> master (fetch first)\nerror: failed to push some refs to 'http://om:sPCJ-015@git.neweb.me/puppet_cloud/om-euqp_database.git'\nhint: Updates were rejected because the remote contains work that you do\nhint: not have locally. This is usually caused by another repository pushing\nhint: to the same ref. You may want to first merge the remote changes (e.g.,\nhint: 'git pull') before pushing again.\nhint: See the 'Note about fast-forwards' in 'git push --help' for details.\nTo http://om:sPCJ-015@git.neweb.me/puppet_cloud/om-euqp_database.git\n ! [rejected]        master -> master (fetch first)\nerror: failed to push some refs to 'http://om:sPCJ-015@git.neweb.me/puppet_cloud/om-euqp_database.git'\nhint: Updates were rejected because the remote contains work that you do\nhint: not have locally. This is usually caused by another repository pushing\nhint: to the same ref. You may want to first merge the remote changes (e.g.,\nhint: 'git pull') before pushing again.\nhint: See the 'Note about fast-forwards' in 'git push --help' for details.", "stderr_lines": ["warning: push.default is unset; its implicit value is changing in", "Git 2.0 from 'matching' to 'simple'. To squelch this message", "and maintain the current behavior after the default changes, use:", "", "  git config --global push.default matching", "", "To squelch this message and adopt the new behavior now, use:", "", "  git config --global push.default simple", "", "See 'git help config' and search for 'push.default' for further information.", "(the 'simple' mode was introduced in Git 1.7.11. Use the similar mode", "'current' instead of 'simple' if you sometimes use older versions of Git)", "", "To http://om:sPCJ-015@git.neweb.me/puppet_cloud/om-euqp_database.git", " ! [rejected]        master -> master (fetch first)", "error: failed to push some refs to 'http://om:sPCJ-015@git.neweb.me/puppet_cloud/om-euqp_database.git'", "hint: Updates were rejected because the remote contains work that you do", "hint: not have locally. This is usually caused by another repository pushing", "hint: to the same ref. You may want to first merge the remote changes (e.g.,", "hint: 'git pull') before pushing again.", "hint: See the 'Note about fast-forwards' in 'git push --help' for details.", "To http://om:sPCJ-015@git.neweb.me/puppet_cloud/om-euqp_database.git", " ! [rejected]        master -> master (fetch first)", "error: failed to push some refs to 'http://om:sPCJ-015@git.neweb.me/puppet_cloud/om-euqp_database.git'", "hint: Updates were rejected because the remote contains work that you do", "hint: not have locally. This is usually caused by another repository pushing", "hint: to the same ref. You may want to first merge the remote changes (e.g.,", "hint: 'git pull') before pushing again.", "hint: See the 'Note about fast-forwards' in 'git push --help' for details."], "stdout": "# On branch master\nnothing to commit, working directory clean", "stdout_lines": ["# On branch master", "nothing to commit, working directory clean"]}

PLAY RECAP *********************************************************************

127.0.0.1                  : ok=7    changed=4    unreachable=0    failed=1    skipped=3    rescued=0    ignored=0   
168.63.149.41              : ok=24   changed=12   unreachable=0    failed=0    skipped=29   rescued=0    ignored=1   
40.83.94.249               : ok=38   changed=20   unreachable=0    failed=0    skipped=35   rescued=0    ignored=1   
puppmaster-b2c             : ok=11   changed=5    unreachable=0    failed=0    skipped=4    rescued=0    ignored=0   



PUPPET_COMMAND_END
MAX RETRIES EXECUTED, COMMAND NOT RESPONDING